<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Dungeon Run</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  </head>
  <body>
    <main class="game-shell">
      <header class="hud">
        <button class="hud-btn pause-btn" id="pause-btn" type="button" aria-pressed="false">Pause</button>
        <div class="status">
          <span class="label">HP</span>
          <span class="health">100</span>
          <span class="label">MANA</span>
          <span class="mana">030</span>
          <span class="label">TIME</span>
          <span class="timer">00:00</span>
          <span class="label">KILLS</span>
          <span class="kills">000</span>
          <span class="label">HUNGER</span>
          <span class="hunger">000</span>
        </div>
        <div class="controls">
          WASD/Arrow Keys to move . Space to Blast
        </div>
        <button class="hud-btn info-btn" id="info-btn" type="button" aria-haspopup="dialog" aria-controls="info-overlay" aria-expanded="false">
          Info
        </button>
      </header>
      <section class="playfield">
        <canvas id="game-canvas" width="960" height="600"></canvas>
        <div class="ground-line"></div>
        <canvas id="minimap" width="180" height="180" aria-hidden="true"></canvas>
        <div class="achievement-banner" id="achievement-banner" role="status" aria-live="polite"></div>
        <div class="joystick" id="joystick">
          <div class="joystick-thumb"></div>
        </div>
        <button class="attack-btn" id="attack-btn" aria-label="Attack"></button>
      </section>
      <section class="overlay overlay--hidden" id="game-over">
        <div class="overlay-card">
          <h1>Game Over</h1>
          <p class="final-scoreboard">
            <span class="label">TIME</span>
            <span class="final-timer">00:00</span>
            <span class="label">KILLS</span>
            <span class="final-kills">000</span>
          </p>
          <button class="btn" id="restart-btn">Try Again</button>
          <button class="btn" id="share-btn">Download Share Image</button>
          <div class="share-preview">
            <canvas id="share-canvas" width="600" height="315" aria-hidden="true"></canvas>
          </div>
        </div>
      </section>
    </main>
    <div class="info-overlay info-overlay--hidden" id="info-overlay" role="dialog" aria-modal="true" aria-labelledby="info-title" aria-hidden="true">
      <div class="info-card">
        <div class="info-card__header">
          <h2 id="info-title">Dungeon Run Guide</h2>
          <button class="info-card__close" id="info-close" type="button" aria-label="Close info">×</button>
        </div>
        <div class="info-card__body">
          <p class="info-intro">
            You're a wizard, Barry. You live in a cave where creatures blink into existence. Some friendly, some not.
          </p>
          <p class="info-tagline">
            Survive as long as you can in the underground maze—stay stocked, stay fed, and outlast the horde.
          </p>
          <section class="info-section">
            <h3>Pickups</h3>
            <ul>
              <li>
                <span class="guide-icon" aria-hidden="true">
                  <svg width="32" height="32" viewBox="0 0 32 32">
                    <rect x="13" y="6" width="6" height="4" fill="#8f5a2e"/>
                    <rect x="12" y="10" width="8" height="3" fill="#cfd9ff" rx="1.5"/>
                    <path d="M10 11c-2 4-1.5 10 2.2 12.6 2.1 1.5 5.5 1.5 7.6 0C23.5 21 24 15 22 11c-3.3-1.8-8.7-1.8-12 0z" fill="#dfe6ff"/>
                    <path d="M11.4 13c-1.3 2.7-1 6.6 1.4 8.3 1.7 1.2 4.3 1.2 6 0 2.5-1.7 2.7-5.6 1.4-8.3-2.2-1.2-6.6-1.2-8.8 0z" fill="#2d5bff"/>
                    <path d="M13 14.2c-.8 1.6-.6 3.9.8 4.9 1 .7 2.5.7 3.5 0 1.4-1 1.6-3.3.8-4.9-1.3-.7-3.8-.7-5.1 0z" fill="#74b0ff" opacity=".65"/>
                  </svg>
                </span>
                <span class="guide-text">Mana vials add 5 mana and respawn around the dungeon—keep exploring so you do not run dry.</span>
              </li>
              <li>
                <span class="guide-icon" aria-hidden="true">
                  <svg width="32" height="32" viewBox="0 0 32 32">
                    <rect x="13" y="6" width="6" height="4" fill="#8f5a2e"/>
                    <rect x="12" y="10" width="8" height="3" fill="#ffd0d8" rx="1.5"/>
                    <path d="M10 11c-2 4-1.5 10 2.2 12.6 2.1 1.5 5.5 1.5 7.6 0C23.5 21 24 15 22 11c-3.3-1.8-8.7-1.8-12 0z" fill="#ffe4e6"/>
                    <path d="M11.4 13c-1.3 2.7-1 6.6 1.4 8.3 1.7 1.2 4.3 1.2 6 0 2.5-1.7 2.7-5.6 1.4-8.3-2.2-1.2-6.6-1.2-8.8 0z" fill="#ff4d6d"/>
                    <path d="M13 14.2c-.8 1.6-.6 3.9.8 4.9 1 .7 2.5.7 3.5 0 1.4-1 1.6-3.3.8-4.9-1.3-.7-3.8-.7-5.1 0z" fill="#ff8ca2" opacity=".75"/>
                  </svg>
                </span>
                <span class="guide-text">Health vials restore 25 HP but expire after a minute—grab them before they fade.</span>
              </li>
              <li>
                <span class="guide-icon" aria-hidden="true">
                  <svg width="32" height="32" viewBox="0 0 32 32">
                    <path d="M16 6c-1.6 0-3.6 0.6-5.2 2.2-2.8 2.6-3 6.8-0.6 9.6 1.8 2 2 3.6 2 4.6 0 2.8 0.6 5.2 0.6 5.2h6.4s0.6-2.6 0.6-5.2c0-1 0.2-2.6 2-4.6 2.4-2.8 2.2-7-0.6-9.6C19.6 6.6 17.6 6 16 6z" fill="#ffb26b"/>
                    <path d="M16 8.8c-1 0-2.4 0.4-3.4 1.4-1.8 1.6-1.8 4.2-0.2 5.8 1.2 1.2 1.4 2.2 1.4 2.8 0 1.6 0.4 3 0.4 3h3.8s0.4-1.4 0.4-3c0-0.6 0.2-1.6 1.4-2.8 1.6-1.6 1.6-4.2-0.2-5.8C18.4 9.2 17 8.8 16 8.8z" fill="#ff7b5d"/>
                    <path d="M14.4 20.4h3.2c0.2 0 0.4 0.2 0.4 0.4 0.2 1.2 0.6 3.6 0.6 4.6 0 1.6-1.6 2.8-2.6 2.8s-2.6-1.2-2.6-2.8c0-1 0.4-3.4 0.6-4.6 0-0.2 0.2-0.4 0.4-0.4z" fill="#703720"/>
                    <ellipse cx="18" cy="11.6" rx="2.2" ry="1.8" fill="#ffdca8"/>
                  </svg>
                </span>
                <span class="guide-text">Meat drops from fallen monsters—snack to calm hunger, but notice how it changes you.</span>
              </li>
            </ul>
          </section>
          <section class="info-section">
            <h3>Enemies</h3>
            <ul>
              <li>
                <span class="guide-icon" aria-hidden="true">
                  <svg width="32" height="32" viewBox="0 0 32 32">
                    <rect x="6" y="14" width="20" height="12" fill="#2d0a0a"/>
                    <rect x="8" y="16" width="16" height="8" fill="#f25858"/>
                    <rect x="18" y="18" width="4" height="3" fill="#f9f9f9"/>
                    <rect x="10" y="18" width="4" height="3" fill="#f9f9f9"/>
                    <rect x="18" y="19" width="2" height="1" fill="#1b1b1b"/>
                    <rect x="12" y="19" width="2" height="1" fill="#1b1b1b"/>
                  </svg>
                </span>
                <span class="guide-text">Gnasher: fast melee biter that rushes straight at you.</span>
              </li>
              <li>
                <span class="guide-icon" aria-hidden="true">
                  <svg width="32" height="32" viewBox="0 0 32 32">
                    <rect x="6" y="14" width="20" height="12" fill="#291c4d"/>
                    <rect x="8" y="16" width="16" height="8" fill="#8b5cf6"/>
                    <rect x="11" y="12" width="4" height="6" fill="#8b5cf6"/>
                    <rect x="17" y="12" width="4" height="6" fill="#8b5cf6"/>
                    <rect x="11" y="19" width="3" height="3" fill="#f9f9f9"/>
                    <rect x="18" y="19" width="3" height="3" fill="#f9f9f9"/>
                    <rect x="12" y="20" width="1" height="1" fill="#1b1b1b"/>
                    <rect x="19" y="20" width="1" height="1" fill="#1b1b1b"/>
                  </svg>
                </span>
                <span class="guide-text">Stalker: patrols corridors until it spots you, then hunts you down.</span>
              </li>
              <li>
                <span class="guide-icon" aria-hidden="true">
                  <svg width="32" height="32" viewBox="0 0 32 32">
                    <rect x="7" y="10" width="18" height="16" rx="4" fill="#2d0f1f"/>
                    <rect x="9" y="12" width="14" height="12" rx="3" fill="#ff4d94"/>
                    <rect x="11" y="14" width="4" height="3" fill="#fff2f8"/>
                    <rect x="17" y="14" width="4" height="3" fill="#fff2f8"/>
                    <rect x="12" y="15" width="2" height="1" fill="#1b0a11"/>
                    <rect x="18" y="15" width="2" height="1" fill="#1b0a11"/>
                    <rect x="13" y="18" width="6" height="2" rx="1" fill="#ff92c2"/>
                    <rect x="9" y="22" width="4" height="6" fill="#3a2814"/>
                    <rect x="19" y="22" width="4" height="6" fill="#3a2814"/>
                  </svg>
                </span>
                <span class="guide-text">Titan: lumbering brute with devastating lunges—keep distance and use cover.</span>
              </li>
              <li>
                <span class="guide-icon" aria-hidden="true">
                  <svg width="32" height="32" viewBox="0 0 32 32">
                    <rect x="6" y="14" width="20" height="12" rx="4" fill="#40180c"/>
                    <rect x="8" y="12" width="16" height="12" rx="4" fill="#ff8456"/>
                    <rect x="10" y="16" width="4" height="3" fill="#ffe9d3"/>
                    <rect x="18" y="16" width="4" height="3" fill="#ffe9d3"/>
                    <rect x="11" y="19" width="2" height="1" fill="#1b0a05"/>
                    <rect x="19" y="19" width="2" height="1" fill="#1b0a05"/>
                    <rect x="9" y="22" width="4" height="5" fill="#35130a"/>
                    <rect x="19" y="22" width="4" height="5" fill="#35130a"/>
                  </svg>
                </span>
                <span class="guide-text">Blightfang (5:00+): blistering sprinter that lunges in bursts—kite to force it into walls.</span>
              </li>
              <li>
                <span class="guide-icon" aria-hidden="true">
                  <svg width="32" height="32" viewBox="0 0 32 32">
                    <rect x="7" y="12" width="18" height="14" rx="5" fill="#1b153a"/>
                    <rect x="9" y="10" width="14" height="12" rx="5" fill="#7d7bff"/>
                    <rect x="11" y="14" width="4" height="4" fill="#e5e3ff"/>
                    <rect x="19" y="14" width="4" height="4" fill="#e5e3ff"/>
                    <rect x="12" y="16" width="2" height="1" fill="#1a1633"/>
                    <rect x="20" y="16" width="2" height="1" fill="#1a1633"/>
                    <rect x="9" y="22" width="6" height="6" rx="2" fill="#29225a"/>
                    <rect x="17" y="22" width="6" height="6" rx="2" fill="#29225a"/>
                  </svg>
                </span>
                <span class="guide-text">Voidreaver (5:00+): sentry caster that blinks into sight then lunges—break line of sight to reset it.</span>
              </li>
              <li>
                <span class="guide-icon" aria-hidden="true">
                  <svg width="32" height="32" viewBox="0 0 32 32">
                    <rect x="7" y="11" width="18" height="16" rx="5" fill="#360819"/>
                    <rect x="9" y="13" width="14" height="12" rx="5" fill="#ff4d7a"/>
                    <rect x="10" y="16" width="5" height="4" fill="#ffe6f1"/>
                    <rect x="19" y="16" width="5" height="4" fill="#ffe6f1"/>
                    <rect x="12" y="18" width="2" height="1" fill="#280713"/>
                    <rect x="20" y="18" width="2" height="1" fill="#280713"/>
                    <rect x="9" y="22" width="5" height="8" fill="#2c121c"/>
                    <rect x="18" y="22" width="5" height="8" fill="#2c121c"/>
                  </svg>
                </span>
                <span class="guide-text">Doomclaw (5:00+): hulking crusher with heavy impact lunges—bait the charge and strafe wide.</span>
              </li>
            </ul>
          </section>
          <section class="info-section">
            <h3>Cave Wildlife</h3>
            <ul>
              <li>Spritelings: tiny glow-sprites that flock together—their packs scatter fast, so steer monsters away if you want them to survive.</li>
              <li>Boulderbacks: hulking loners that plod through the halls—use them as moving cover but remember monsters will feast on them if you do not intervene.</li>
              <li>Scamper, Glider, Burrower, and Hootling: the familiar foragers who flee on sight. If you hunt them, their meat restores 4 hunger without mutating you.</li>
            </ul>
          </section>
          <section class="info-section">
            <h3>Survival Mechanics</h3>
            <ul>
              <li>Hunger climbs quickly—if it hits 100 you perish. Meat restores 2 hunger, so keep hunting for fresh drops.</li>
              <li>Every 5 meals mutates you further. Expect new limbs, eyes, and aura all the way to the 100-meal cap.</li>
              <li>Elite monsters awaken after 5 minutes. Their lunges are faster and reach farther—stay near cover.</li>
              <li>Staff upgrades reset mana to 30, boost range, damage, and cadence, and add +10 max HP each time.</li>
              <li>Docile prey now range from fragile spritelings to lone boulderbacks—protect them to deny enemy heals, or harvest them for non-mutating meat (+4 hunger) when you’re desperate.</li>
              <li>Injured monsters hunt prey first—deny them by defending the critters or watch enemies heal mid-fight.</li>
            </ul>
          </section>
          <section class="info-section">
            <h3>Staff Upgrades</h3>
            <p>
              After your first 5 kills and every 15 kills after that, your staff evolves: damage climbs, cast cadence
              tightens, and arcane reach extends. Watch the banner so you know when the next power spike hits.
            </p>
          </section>
          <section class="info-section">
            <h3>Tips</h3>
            <ul>
              <li>Use the minimap to track pickups, enemies, and rooms you have not cleared.</li>
              <li>Mobile: drag the virtual stick to move and tap to cast. Desktop: WASD/arrow keys plus Space/Enter to blast.</li>
              <li>Line of sight matters—break contact with walls to shake sentries and set ambushes.</li>
              <li>Mana and health spawn far from you; roam to stay supplied and avoid getting cornered.</li>
              <li>Keep hunger in check—carry meat back-to-back for relief, but note how it changes you.</li>
            </ul>
          </section>
        </div>
      </div>
    </div>
    <footer class="credits">
      Survive the maze • Made with <span aria-hidden="true">❤️</span> by
      <a href="https://x.com/dijkstradev" target="_blank" rel="noopener noreferrer">@dijkstradev</a>
    </footer>
    <script src="script.js" defer></script>
  </body>
</html>
